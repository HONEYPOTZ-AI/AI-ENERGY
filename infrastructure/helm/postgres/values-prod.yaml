# Production environment overrides
replicaCount: 1

image:
  tag: "15.3-alpine"
  pullPolicy: IfNotPresent

resources:
  limits:
    cpu: 4000m
    memory: 8Gi
  requests:
    cpu: 2000m
    memory: 4Gi

persistence:
  enabled: true
  storageClass: "fast-ssd"
  size: 100Gi

postgres:
  database: "mydb_prod"
  username: "postgres"
  password: "CHANGE_THIS_IN_PRODUCTION"
  maxConnections: "500"
  sharedBuffers: "2GB"
  effectiveCacheSize: "6GB"
  maintenanceWorkMem: "512MB"
  walBuffers: "32MB"

affinity:
  podAntiAffinity:
    requiredDuringSchedulingIgnoredDuringExecution:
      - labelSelector:
          matchExpressions:
            - key: app.kubernetes.io/name
              operator: In
              values:
                - postgres
        topologyKey: kubernetes.io/hostname

configMap:
  data:
    POSTGRES_DB: "mydb_prod"
    POSTGRES_MAX_CONNECTIONS: "500"
    POSTGRES_SHARED_BUFFERS: "2GB"
