# Production environment overrides
replicaCount: 5

image:
  tag: "1.0.0"
  pullPolicy: IfNotPresent

gpu:
  enabled: true
  limit: 1

resources:
  limits:
    cpu: 4000m
    memory: 8Gi
    nvidia.com/gpu: 1
  requests:
    cpu: 2000m
    memory: 4Gi
    nvidia.com/gpu: 1

autoscaling:
  enabled: true
  minReplicas: 5
  maxReplicas: 20
  targetCPUUtilizationPercentage: 75

affinity:
  nodeAffinity:
    requiredDuringSchedulingIgnoredDuringExecution:
      nodeSelectorTerms:
      - matchExpressions:
        - key: accelerator
          operator: In
          values:
          - nvidia-gpu
  podAntiAffinity:
    requiredDuringSchedulingIgnoredDuringExecution:
      - labelSelector:
          matchExpressions:
            - key: app.kubernetes.io/name
              operator: In
              values:
                - inference
        topologyKey: kubernetes.io/hostname

configMap:
  data:
    MODEL_PATH: "/models"
    BATCH_SIZE: "32"
    MAX_BATCH_DELAY: "100"
    ENABLE_CUDA: "true"
    LOG_LEVEL: "warn"
